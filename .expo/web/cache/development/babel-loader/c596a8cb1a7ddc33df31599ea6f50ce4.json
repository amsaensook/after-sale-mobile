{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from \"axios\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\naxios.interceptors.request.use(function _callee(config) {\n  var token;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"accessToken\"));\n        case 2:\n          token = _context.sent;\n          config.timeout = 1000 * 10;\n          config.url = 'http://119.59.105.14/after-sale-api-mobile' + config.url;\n          if (token) {\n            config.headers = {\n              'Authorization': JSON.parse(token || \"{}\")\n            };\n          }\n          return _context.abrupt(\"return\", config);\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}, function (error) {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response && error.response.status === 401) {\n    return;\n  }\n  return Promise.reject(error);\n});\nexport var httpClient = axios;","map":{"version":3,"names":["axios","AsyncStorage","interceptors","request","use","_callee","config","token","_regeneratorRuntime","async","_callee$","_context","prev","next","awrap","getItem","sent","timeout","url","headers","JSON","parse","abrupt","stop","Promise","error","reject","response","status","httpClient"],"sources":["D:/after-sale-mobile/src/services/axios.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage'\r\nimport { REACT_APP_API_URL } from '@env';\r\n\r\n// Add a request interceptor\r\naxios.interceptors.request.use(async (config) => {\r\n\r\n    // Do something before request is sent\r\n\r\n    const token = await AsyncStorage.getItem(\"accessToken\");\r\n\r\n    config.timeout = 1000 * 10\r\n    //config.url = `${REACT_APP_API_URL}${config.url}`;\r\n    //config.url = `${'http://as-spare-part.ttlsystem.com:5000/after-sale-api-mobile'}${config.url}`;\r\n    config.url = `${'http://119.59.105.14/after-sale-api-mobile'}${config.url}`;\r\n    //config.headers = { 'Content-Type': 'multipart/form-data' }\r\n    \r\n    if (token) {\r\n        config.headers = { /* ...config.headers, */ 'Authorization': JSON.parse(token || \"{}\") }\r\n    }\r\n\r\n    return config;\r\n\r\n}, (error) => {\r\n\r\n    // Do something with request error\r\n\r\n    return Promise.reject(error);\r\n});\r\n\r\n// Add a response interceptor\r\naxios.interceptors.response.use((response) => {\r\n\r\n    // Any status code that lie within the range of 2xx cause this function to trigger\r\n    // Do something with response data\r\n\r\n    return response;\r\n\r\n}, function (error) {\r\n\r\n    if (error.response && error.response.status === 401) {\r\n\r\n        return\r\n    }\r\n\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport const httpClient = axios\r\n\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,2CAA2C;AAIpED,KAAK,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,SAAAC,QAAOC,MAAM;EAAA,IAAAC,KAAA;EAAA,OAAAC,mBAAA,CAAAC,KAAA,UAAAC,SAAAC,QAAA;IAAA;MAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,OAAAL,mBAAA,CAAAM,KAAA,CAIpBb,YAAY,CAACc,OAAO,CAAC,aAAa,CAAC;QAAA;UAAjDR,KAAK,GAAAI,QAAA,CAAAK,IAAA;UAEXV,MAAM,CAACW,OAAO,GAAG,IAAI,GAAG,EAAE;UAG1BX,MAAM,CAACY,GAAG,GAAM,4CAA4C,GAAGZ,MAAM,CAACY,GAAK;UAG3E,IAAIX,KAAK,EAAE;YACPD,MAAM,CAACa,OAAO,GAAG;cAA2B,eAAe,EAAEC,IAAI,CAACC,KAAK,CAACd,KAAK,IAAI,IAAI;YAAE,CAAC;UAC5F;UAAC,OAAAI,QAAA,CAAAW,MAAA,WAEMhB,MAAM;QAAA;QAAA;UAAA,OAAAK,QAAA,CAAAY,IAAA;MAAA;IAAA;EAAA,qBAAAC,OAAA;AAAA,CAEhB,EAAE,UAACC,KAAK,EAAK;EAIV,OAAOD,OAAO,CAACE,MAAM,CAACD,KAAK,CAAC;AAChC,CAAC,CAAC;AAGFzB,KAAK,CAACE,YAAY,CAACyB,QAAQ,CAACvB,GAAG,CAAC,UAACuB,QAAQ,EAAK;EAK1C,OAAOA,QAAQ;AAEnB,CAAC,EAAE,UAAUF,KAAK,EAAE;EAEhB,IAAIA,KAAK,CAACE,QAAQ,IAAIF,KAAK,CAACE,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IAEjD;EACJ;EAEA,OAAOJ,OAAO,CAACE,MAAM,CAACD,KAAK,CAAC;AAChC,CAAC,CAAC;AAEF,OAAO,IAAMI,UAAU,GAAG7B,KAAK"},"metadata":{},"sourceType":"module"}